"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};window.ai={},window._hjm=null,window.hjm=null;var tab={},pngRes={},getLab=function n(t){var e=t.name;if("_"===e[0])tab[t.name]=t;else{var o=e.split("_");"hjm"===o[0]&&(tab[o[1]].lab=t.getComponent(cc.Label),tab[o[1]].lab.string=String(tab[o[1]].get()))}for(var r=t.getChildren(),i=r.length-1;i>=0;i--)n(r[i])},removeLab=function(){for(var n in tab)"_"!==n[0]&&(tab[n].lab=null)},hjmInit=function(){removeLab();var n=cc.director.getScene().getChildren()[0];getLab(n)},loadEnd=function(){for(var n in pngRes)pngRes[n]?(cc.loader.releaseRes(n,cc.SpriteFrame),delete pngRes[n]):pngRes[n]=!0;pngRes={}};window._hjm1=new Proxy({},{get:function(n,t){return hjm=_hjm,hjmInit(),_hjm[t]},set:function(n,t,e){hjm=_hjm,hjmInit(),_hjm[t]=e}}),cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,function(){hjm=_hjm1;var n=Math.floor(9987617*cc.random0To1());dyl.setRand(n)}),cc.director.on(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){loadEnd()}),window.initHjmFun=function(){cc.log("initHjmFun");_hjm=new Proxy(function(n,t){if(t&&"object"===(void 0===t?"undefined":_typeof(t))){var e=dyl.read("_"+n);e||(e=t);var o=new Proxy(e,{set:function(t,e,o){return t[e]=o,dyl.save("_"+n,t),!0},get:function(n,t){return n[t]}});tab[n]={set:function(n){return cc.error("hjm 无法直接改变原有保存的变量")},get:function(){return o}}}else if("string"!=typeof t){var r=dyl.read(n);r="number"!=typeof r?t:Number(r);var i=[cc.random0To1()+.1,-cc.random0To1()-.1,cc.random0To1()+.1,cc.random0To1()+.1,-cc.random0To1()-.1],a=0,c=null,u=null,l=null,m=.1,d=.1,f=function(t){a++,m=cc.random0To1()+.1,d=cc.random0To1()+.1,c=t+13*m+1e3*d;var e=a%5;u=t*i[e]*m*13.3+31.7,l=t*i[e=4-(a+2)%5]*d*51.1+91.3,dyl.save(n,t),tab[n].lab&&(tab[n].lab.string=String(t))};tab[n]={get:function(){var n=c-(13*m+1e3*d),t=a%5,e=(u-31.7)/(i[t]*m*13.3),o=(l-91.3)/(i[t=4-(a+2)%5]*d*51.1);return Math.abs(n-e)>.001?cc.error("数据1出现异常"):Math.abs(n-o)>.001?cc.error("数据2出现异常"):Math.round(n)},set:f,lab:null},f(r)}else{var s=dyl.read(n);"string"!=typeof s&&(s=t),tab[n]={set:function(t){dyl.save(n,t),s=t},get:function(){return s}}}},{get:function(n,t){return"_"===t[0]?tab[t]:tab[t].get()},set:function(n,t,e){var o=void 0===e?"undefined":_typeof(e);if("number"===o||"string"===o)tab[t].set(e);else{var r=e;pngRes[r.name+"/"+t]?pngRes[r.name+"/"+t]=!1:pngRes[r.name+"/"+t]=!0,cc.loader.loadRes(r.name+"/"+t,cc.SpriteFrame,function(n,t){if(!cc.isValid(r))return!0;r.getComponent(cc.Sprite).spriteFrame=t})}return!0}})},window.initHjmDataFun&&window.isCryptoJS&&window.initDylFun&&(cc.log("init hjm"),window.initDylFun(window.isCryptoJS),window.initHjmFun(),window.initHjmDataFun());